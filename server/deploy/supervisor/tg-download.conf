[program:tg-download]
; 项目路径
directory=/data/extension-tg-download/backend

; 虚拟环境中的 Python 路径
command=/data/extension-tg-download/backend/.venv/bin/python -m uvicorn app.main:app --host 0.0.0.0 --port 9680 --workers 1

; 用户
user=root

; 自动启动
autostart=true

; 自动重启
autorestart=true

; 启动延迟
startsecs=10

; 重启尝试次数
startretries=3

; 退出码
stopasgroup=true
killasgroup=true

; 停止信号
stopwaitsecs=10

; 重定向输出
stdout_logfile=/data/extension-tg-download/backend/log/supervisor.log
stderr_logfile=/data/extension-tg-download/backend/log/supervisor_error.log

; 日志文件大小
stdout_logfile_maxbytes=50MB
stderr_logfile_maxbytes=50MB

; 日志文件保留数量
stdout_logfile_backups=10
stderr_logfile_backups=10

; 进程优先级（数字越小优先级越高）
priority=999

; 环境变量
environment=
    PYTHONUNBUFFERED="1",
    TZ="America/New_York"
